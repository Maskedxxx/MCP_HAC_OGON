# AGENTS.md - Турисчтический Консьерж

## Обзор проекта

### Концепция
Интеллектуальный туристический консьерж на базе LLM с архитектурой MCP (Model Context Protocol) серверов. Система объединяет множественные источники данных о путешествиях через специализированные MCP серверы для создания персонализированных детальных планов поездок.

### Архитектура решения
**LLM Agent** ← → **MCP Servers** ← → **External APIs**
- **LLM Agent**: Обработка запросов пользователя, анализ предпочтений, генерация итогового плана
- **MCP Servers**: Специализированные микросервисы для каждого источника данных
- **External APIs**: Airbnb, TripAdvisor, Google Maps

### Поэтапная разработка

**Фаза 1: MCP Серверы (текущая)**
- ✅ Airbnb MCP Server - поиск и анализ жилья
- ⏳ TripAdvisor MCP Server - рестораны, отзывы, достопримечательности  
- ⏳ Google Maps MCP Server - маршруты, геолокация, расстояния

**Фаза 2: Интеграция и тестирование**
- Отладка взаимодействия между серверами
- Настройка параметров и конфигураций
- Обработка edge cases и ошибок

**Фаза 3: LLM Pipeline**
- Создание агента для взаимодействия с пользователем
- Логика принятия решений и персонализации
- Генерация структурированных отчетов/планов

### Целевой результат
Персонализированный детальный план путешествия включающий:
- Оптимальное жилье по критериям пользователя
- Рекомендации ресторанов с учетом предпочтений
- Маршруты между локациями с временными затратами
- Достопримечательности и активности по интересам

## Структура проекта

### Основные модули
```
project/
├── config.py           # Конфигурация и настройки
├── airbnb_client.py    # MCP клиент для Airbnb
├── formatter.py        # Форматирование вывода
├── main.py            # Точка входа и демо
└── AGENTS.md          # Этот файл
```

### Ключевые компоненты
- `AirbnbMCPClient` - клиент для работы с Airbnb MCP сервером
- `AirbnbFormatter` - отображение результатов поиска
- `config.py` - централизованные настройки (эмодзи, сообщения, параметры)

## Стандарты кода для AI-разработки

### Python Code Style
```python
# Используйте четкие, описательные имена
def search_accommodations(location: str, adults: int = 2) -> List[Dict]:
    """
    Поиск жилья в указанном месте
    
    Args:
        location: Город для поиска  
        adults: Количество взрослых
        
    Returns:
        List[Dict]: Список найденных вариантов
    """
    
# Типизация обязательна
from typing import Dict, List, Optional, Any

# Docstrings для всех публичных методов
# Короткие комментарии для сложной логики
```

### Архитектурные принципы
1. **Модульность** - каждый класс отвечает за одну задачу
2. **Конфигурируемость** - настройки выносим в config.py
3. **Типизация** - обязательные type hints
4. **Документация** - docstrings для всех публичных методов
5. **Обработка ошибок** - try/except с понятными сообщениями

### Структура новых модулей
```python
# module_name.py
"""
Краткое описание модуля
"""

import стандартные_библиотеки
import сторонние_библиотеки  
from наши_модули import что_то

from config import НАСТРОЙКИ


class ModuleName:
    """Описание класса"""
    
    def __init__(self, config: Dict = None):
        """Инициализация"""
        self.config = config or DEFAULT_CONFIG
    
    def public_method(self, param: str) -> ReturnType:
        """Публичный метод с docstring"""
        pass
    
    def _private_method(self) -> None:
        """Приватный метод"""
        pass
```

## Инструкции для тестирования

### Запуск приложения
```bash
# Установка зависимостей
pip install -r requirements.txt

# Запуск демо
python main.py

# Запуск тестов (когда появятся)
pytest tests/
```

### Проверка кода
```bash
# Линтинг
flake8 .
black --check .

# Типы
mypy .
```

## Workflow для новых фич

### 1. Планирование
- Создайте новую ветку от main
- Опишите задачу в issue/комментарии
- Определите какие модули затронуты

### 2. Разработка
- Следуйте стандартам кода выше
- Добавляйте конфигурацию в config.py
- Пишите docstrings и комментарии
- Обновляйте этот AGENTS.md если нужно

### 3. Тестирование
- Убедитесь что main.py работает
- Проверьте интеграцию с существующими модулями
- Протестируйте edge cases

### 4. Коммит и PR
- Коммиты на русском: "Добавлен модуль поиска ресторанов"
- PR описание: что сделано, как тестировать
- Упомяните связанные issues

## Roadmap развития

### Ближайшие задачи
1. **Модуль ресторанов** - интеграция с сервисом поиска ресторанов
2. **Модуль достопримечательностей** - поиск мест для посещения  
3. **AI Планировщик** - создание маршрутов на основе предпочтений
4. **Web интерфейс** - простой Flask/FastAPI для демо

### Технические улучшения
- Добавить логирование (logging module)
- Кэширование запросов
- Обработка rate limits
- Конфигурация через environment variables
- Unit тесты для всех модулей

## Соглашения

### Именование файлов
- Модули: `snake_case.py` 
- Классы: `CamelCase`
- Функции/методы: `snake_case`
- Константы: `UPPER_CASE`

### Ветки Git
- `feature/название-фичи` - новая функциональность
- `fix/название-бага` - исправления
- `refactor/что-рефакторим` - рефакторинг

### Комментарии
- На русском языке
- Объясняют "почему", а не "что"
- Для сложной бизнес-логики обязательны